{% extends "layout.html" %}

{% block head %}
    <script src="../static/scripts/account.js" type="text/javascript"></script>
{% endblock head %}

{% block content %}

    <div class="content-section">
        <legend class="border-bottom mb-4" title="documents uploaded by admin">Documents in {{ project_name }}</legend>
        <ul class="list-group" id="projectDocs">
            {% for projectDoc in projectDocs %}
                <li class="list-group-item d-flex justify-content-between align-items-center" id="projectDoc-{{ projectDoc.id }}">
                    <a title="{{ projectDoc.content }}" href="{{ url_for('main.sentlevel', doc_sent_id=projectDoc.id ~ '_1')}}">
                        {{projectDoc.filename}}
                    </a>
                    <span class="badge">
                            checked out by: {{ checked_out_by[loop.index] }}
                    </span>
                    <span class="badge" title="checked out by following members">
                        <span class="btn btn-xs btn-default" onclick="addToMyAnnotation({{ projectDoc.id }}, `{{ project_id }}`); event.stopPropagation();">
                            add to My Annotations
                        </span>
                    </span>
                    <span class="badge">
                        <span class="btn btn-xs btn-default" onclick="removeDocFromProj({{ projectDoc.id }}, `{{ project_id }}`); event.stopPropagation();">
                            remove from project
                        </span>
                    </span>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="content-section">
        <legend class="border-bottom mb-4">Unassigned Documents</legend>
        <ul class="list-group" id="unassignedDocs">
            {% for unassignedDoc in unassignedDocs %}
                <li class="list-group-item d-flex justify-content-between align-items-center" id="unassignedDoc-{{ unassignedDoc.id }}">
                    <a title="{{ unassignedDoc.content }}" href="{{ url_for('main.sentlevel', doc_sent_id=unassignedDoc.id ~ '_1')}}">
                        {{unassignedDoc.filename}}
                    </a>
                    <span class="badge">
                        <span class="btn btn-xs btn-default" onclick="addDocToProj({{ unassignedDoc.id }}, `{{ project_id }}`); event.stopPropagation();">
                            add to current project
                        </span>
                    </span>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="content-section">
        <legend class="border-bottom mb-4">My Annotations</legend>
        <ul class="list-group" id="annotatedDocs">
            {% for annotatedDoc in annotatedDocs %}
                <li class="list-group-item d-flex justify-content-between align-items-center" id="annotatedDoc-{{ annotatedDoc.id }}">
                    <a title="{{ annotatedDoc.content }}" href="{{ url_for('main.sentlevel', doc_sent_id=annotatedDoc.id ~ '_1')}}">
                        {{annotatedDoc.filename}}
                    </a>
                    <span class="badge">
                        <span class="btn btn-xs btn-default" onclick="addToQc({{ annotatedDoc.id }}, `{{ project_id }}`); event.stopPropagation();">
                            add to Quality Control
                        </span>
                    </span>
                    <span class="badge">
                        <span class="btn btn-xs btn-default" onclick="removeFromMyAnnotation({{ annotatedDoc.id }}, `{{ project_id }}`); event.stopPropagation();">
                            delete from My Annotations
                        </span>
                    </span>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="content-section">
        <legend class="border-bottom mb-4">Quality Control</legend>
        <ul class="list-group" id="otherDocs">
            {% for qcDoc in qcDocs %}
                <li class="list-group-item d-flex justify-content-between align-items-center" id="qcDoc-{{ qcDoc.id }}">
                    <a title="{{ qcDoc.content }}" href="{{ url_for('main.sentlevel', doc_sent_id=qcDoc.id ~ '_1')}}">
                        {{qcDoc.filename}}
                    </a>
                    <span class="badge">
                        uploaded by {{ qcUploaders[loop.index] }}
                    </span>
                    <span class="badge">
                        <span class="btn btn-xs btn-default" onclick="rmFromQc({{ qcDoc.id }}, `{{ project_id }}`); event.stopPropagation();">
                            delete from Quality Control
                        </span>
                    </span>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="content-section">
        <legend class="border-bottom mb-4"> {{ project_name }} admin and members</legend>
        <input type="text" id="new_member_name">
        <button onclick="addNewMember({{ project_id }})">add new member</button>
        <ul class="list-group" id="all-members">
            {% for member in members %}
                <li class="list-group-item d-flex justify-content-between align-items-center" id="projectMember-{{ member.id }}">
                    <a title="click on member to search their annotation" href="{{ url_for('users.search', project_id=project_id, member_id=member.id) }}">
                        {{member.username}}
                    </a>
                    <span class="badge">
                        <label for="permission">permissions:</label>
                        <select name="permission" id="permission-{{ member.id }}">
                          <option value="view">view</option>
                          <option value="annotate">annotate</option>
                          <option value="edit">edit</option>
                          <option value="admin">admin</option>
                        </select>
                    </span>
                    <span class="badge">
                        <span class="btn btn-xs btn-default" onclick="rmMember({{ member.id }}, {{ project_id }}); event.stopPropagation();">
                            remove member
                        </span>
                    </span>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="content-section">
        <legend class="border-bottom mb-4">Annotation Lattices</legend>
        <ul class="list-group" id="otherDocs">
            <li class="list-group-item d-flex justify-content-between align-items-center" >
                <a title="click on member to search their annotation" href="{{ url_for('users.discourse') }}">
                    Discourse Relations
                </a>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center" >
                <a title="click on member to search their annotation" href="{{ url_for('users.aspect') }}">
                    Aspect
                </a>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center" >
                <a title="click on member to search their annotation" href="{{ url_for('users.person') }}">
                    Person
                </a>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center" >
                <a title="click on member to search their annotation" href="{{ url_for('users.number') }}">
                    Number
                </a>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center" >
                <a title="click on member to search their annotation" href="{{ url_for('users.modal') }}">
                    Modal strength
                </a>
            </li>
        </ul>
    </div>
    <script type="text/javascript">
        display_permission({{ permissions | safe}}, {{ member_ids | safe }});
        change_permission({{ project_id }})
    </script>

{% endblock content%}


